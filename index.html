<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Hoho3D - Buscador de Filamentos</title>
<style>
  /* Reset y tipografía elegante */
  * {
    box-sizing: border-box;
  }
  body {
    margin:0; padding:0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0f1f29;
    color: #d0e7ea;
    display: flex;
    height: 100vh;
    overflow: hidden;
  }
  a {
    color: #60c4b0;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
  h2 {
    margin: 0 0 15px 0;
    font-weight: 700;
    color: #a0f2d8;
  }
  button {
    background: #2b908f;
    color: #0f1f29;
    border: none;
    padding: 12px 25px;
    margin: 20px auto 0 auto;
    display: block;
    font-weight: 700;
    font-size: 1rem;
    border-radius: 30px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #60c4b0;
  }

  /* Layout contenedor */
  .container {
    display: flex;
    width: 100%;
    height: 100vh;
    gap: 15px;
    padding: 15px;
  }

  /* Panel Izquierdo: búsqueda + lista de colores */
  .left-panel {
    flex: 1;
    background: #183841;
    border-radius: 15px;
    padding: 20px;
    display: flex;
    flex-direction: column;
  }
  .search-box {
    margin-bottom: 15px;
  }
  .search-box input {
    width: 100%;
    padding: 10px 15px;
    border-radius: 30px;
    border: none;
    font-size: 1rem;
    outline: none;
    background: #264b4a;
    color: #d0e7ea;
    transition: background-color 0.3s ease;
  }
  .search-box input::placeholder {
    color: #a0c5c1;
  }
  .color-list {
    overflow-y: auto;
    flex-grow: 1;
    padding-right: 5px;
  }
  .color-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    padding: 8px 10px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.25s ease;
  }
  .color-item:hover {
    background: #2b6a68;
  }
  .color-swatch {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    margin-right: 15px;
    border: 2px solid #fff9;
  }
  .color-info {
    flex-grow: 1;
    color: #a9d1ce;
  }
  .color-name {
    font-weight: 600;
    font-size: 1rem;
  }
  .color-hex {
    font-family: monospace;
    font-size: 0.85rem;
    color: #7bc4b3;
  }

  /* Panel Central: rueda y display */
  .center-panel {
    flex: 2.3;
    background: #1e3440;
    border-radius: 20px;
    padding: 30px 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Rueda de color animada */
  .color-wheel {
    position: relative;
    width: 280px;
    height: 280px;
    border-radius: 50%;
    background:
      conic-gradient(
        #ff0000, #ff7f00, #ffff00, #7fff00, #00ff00,
        #00ff7f, #00ffff, #007fff, #0000ff,
        #7f00ff, #ff00ff, #ff007f, #ff0000
      );
    box-shadow: 0 0 15px #60c4b0cc;
    cursor: pointer;
    transition: box-shadow 0.3s ease;
  }
  .color-wheel:hover {
    box-shadow: 0 0 30px #60c4b0ff;
  }
  .color-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 50px;
    height: 50px;
    margin-left: -25px;
    margin-top: -25px;
    border-radius: 50%;
    border: 3px solid #60c4b0;
    box-shadow: 0 0 12px #60c4b0cc inset;
    background: transparent;
    pointer-events: none;
  }
  .selected-hex {
    margin-top: 20px;
    font-family: monospace;
    font-size: 1.3rem;
    font-weight: 700;
    color: #60c4b0;
    user-select: none;
  }

  /* Display filamentos */
  .filaments-display {
    margin-top: 30px;
    width: 100%;
    max-height: 320px;
    overflow-y: auto;
    background: #143238;
    border-radius: 15px;
    padding: 20px 30px;
    box-shadow: 0 0 12px #103030aa inset;
  }
  .filament-item {
    display: flex;
    align-items: center;
    margin-bottom: 14px;
  }
  .filament-color {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    border: 2px solid #60c4b099;
    margin-right: 20px;
    flex-shrink: 0;
  }
  .filament-name {
    flex-grow: 1;
    font-weight: 700;
    font-size: 1rem;
    color: #a0f2d8;
  }
  .filament-link {
    font-size: 0.9rem;
    color: #7ec7ba;
  }
  .filament-link:hover {
    color: #d0e7ea;
  }

  /* Panel Derecho: ideas aleatorias */
  .right-panel {
    flex: 1.3;
    background: #183841;
    border-radius: 20px;
    padding: 30px 25px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #a0f2d8;
  }
  .ideas-title {
    font-weight: 700;
    font-size: 1.6rem;
    margin-bottom: 20px;
    text-align: center;
  }
  .ideas-text {
    font-size: 1rem;
    line-height: 1.4;
    max-width: 280px;
    min-height: 140px;
    color: #c1eee5;
    margin-bottom: 25px;
  }
</style>
</head>
<body>
  <div class="container">
    <!-- Panel Izquierdo -->
    <section class="left-panel">
      <h2>Colores en Stock</h2>
      <div class="search-box">
        <input
          type="text"
          id="colorSearch"
          placeholder="Buscar por nombre o hex (#)..."
          oninput="filterColors()"
          aria-label="Buscar colores en stock"
        />
      </div>
      <div class="color-list" id="colorList" tabindex="0" role="listbox" aria-label="Lista de colores disponibles">
        <!-- Aquí van los colores -->
      </div>
    </section>

    <!-- Panel Central -->
    <section class="center-panel">
      <h2>Rueda de Colores</h2>
      <div
        class="color-wheel"
        id="colorWheel"
        aria-label="Rueda de colores"
        role="slider"
        tabindex="0"
        aria-valuemin="0"
        aria-valuemax="360"
        aria-valuenow="0"
        aria-valuetext="#ff0000"
      ></div>
      <div class="color-indicator" id="colorIndicator"></div>
      <div class="selected-hex" id="selectedHex" aria-live="polite">#ff0000</div>

      <div class="filaments-display" aria-label="Filamentos disponibles">
        <!-- Filamentos listados -->
      </div>
    </section>

    <!-- Panel Derecho -->
    <section class="right-panel" role="complementary">
      <h2 class="ideas-title">Ideas 3D con tus Colores</h2>
      <div class="ideas-text" id="ideasText" aria-live="polite">
        Haz clic en el botón para obtener ideas de impresión 3D que combinan con tus filamentos.
      </div>
      <button id="generateIdeasBtn" aria-label="Generar ideas de impresión 3D">Generar Ideas</button>
    </section>
  </div>

<script>
  // Datos de los filamentos cargados con nombre, hex y link
  const filaments = [
    {
      name: "Grilon 3 PLA SILK Platino 1.75mm x 1kg",
      hex: "#5b6770",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/silk/grilon-3-pla-silk-platino-175mm-x-1kg-5b6770"
    },
    {
      name: "Grilon 3 PLA Piel 720 1.75mm x 1KG",
      hex: "#e7b78a",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-piel-720-175mm-x-1kg-e7b78a"
    },
    {
      name: "Grilon 3 PLA Gris Plata 1.75mm x 1kg",
      hex: "#75787b",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-gris-plata-175mm-x-1kg-75787b"
    },
    {
      name: "Grilon 3 PLA Cobre 1.75mm x 1kg",
      hex: "#a1561c",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-cobre-175mm-x-1kg-a1561c"
    },
    {
      name: "Grilon 3 PLA Bronce 1.75mm x 1kg",
      hex: "#998542",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-bronce-175mm-x-1kg-998542"
    }
  ];
  >
  // Datos de los filamentos cargados con nombre, hex y link
  const filaments = [
    {
      name: "Grilon 3 PLA SILK Platino 1.75mm x 1kg",
      hex: "#5b6770",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/silk/grilon-3-pla-silk-platino-175mm-x-1kg-5b6770"
    },
    {
      name: "Grilon 3 PLA Piel 720 1.75mm x 1KG",
      hex: "#e7b78a",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-piel-720-175mm-x-1kg-e7b78a"
    },
    {
      name: "Grilon 3 PLA Gris Plata 1.75mm x 1kg",
      hex: "#75787b",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-gris-plata-175mm-x-1kg-75787b"
    },
    {
      name: "Grilon 3 PLA Cobre 1.75mm x 1kg",
      hex: "#a1561c",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-cobre-175mm-x-1kg-a1561c"
    },
    {
      name: "Grilon 3 PLA Bronce 1.75mm x 1kg",
      hex: "#998542",
      link: "https://www.hoho3d.com.ar/impresion-3d/filamentos/grilon-3/basicos/grilon-3-pla-bronce-175mm-x-1kg-998542"
    }
  ];

  // Panel izquierdo: listado y búsqueda
  const colorListEl = document.getElementById('colorList');
  const searchInput = document.getElementById('colorSearch');

  // Renderiza la lista de colores
  function renderColorList(list) {
    colorListEl.innerHTML = '';
    list.forEach((filament, index) => {
      const div = document.createElement('div');
      div.className = 'color-item';
      div.setAttribute('role', 'option');
      div.setAttribute('tabindex', '0');
      div.setAttribute('aria-label', `${filament.name}, color ${filament.hex}`);

      div.innerHTML = `
        <div class="color-swatch" style="background-color: ${filament.hex};"></div>
        <div class="color-info">
          <div class="color-name">${filament.name}</div>
          <div class="color-hex">${filament.hex}</div>
        </div>
      `;
      div.onclick = () => selectColor(filament.hex);
      div.onkeydown = (e) => {
        if(e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          selectColor(filament.hex);
        }
      };
      colorListEl.appendChild(div);
    });
  }

  // Filtra la lista según búsqueda
  function filterColors() {
    const term = searchInput.value.trim().toLowerCase();
    if (!term) {
      renderColorList(filaments);
      return;
    }
    const filtered = filaments.filter(fil =>
      fil.name.toLowerCase().includes(term) ||
      fil.hex.toLowerCase().includes(term)
    );
    renderColorList(filtered);
  }

  // Panel central: rueda de colores interactiva
  const colorWheel = document.getElementById('colorWheel');
  const colorIndicator = document.getElementById('colorIndicator');
  const selectedHexEl = document.getElementById('selectedHex');
  const filamentsDisplay = document.querySelector('.filaments-display');

  let selectedHue = 0;

  // Convierte HSV a HEX
  function HSVtoHex(h, s, v) {
    let c = v * s;
    let x = c * (1 - Math.abs(((h / 60) % 2) - 1));
    let m = v - c;
    let r=0, g=0, b=0;

    if(h >= 0 && h < 60){ r=c; g=x; b=0; }
    else if(h < 120){ r=x; g=c; b=0; }
    else if(h < 180){ r=0; g=c; b=x; }
    else if(h < 240){ r=0; g=x; b=c; }
    else if(h < 300){ r=x; g=0; b=c; }
    else{ r=c; g=0; b=x; }

    r = Math.round((r + m) * 255);
    g = Math.round((g + m) * 255);
    b = Math.round((b + m) * 255);

    return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
  }

  // Selecciona color
  function selectColor(hex) {
    selectedHexEl.textContent = hex.toUpperCase();
    colorIndicator.style.backgroundColor = hex;
    showFilamentsByColor(hex);
  }

  // Calcula distancia entre dos colores hex (Euclidiana RGB)
  function colorDistance(c1, c2) {
    let r1 = parseInt(c1.slice(1,3),16);
    let g1 = parseInt(c1.slice(3,5),16);
    let b1 = parseInt(c1.slice(5,7),16);
    let r2 = parseInt(c2.slice(1,3),16);
    let g2 = parseInt(c2.slice(3,5),16);
    let b2 = parseInt(c2.slice(5,7),16);
    return Math.sqrt((r1-r2)**2+(g1-g2)**2+(b1-b2)**2);
  }

  // Muestra todos los filamentos ordenados por cercanía al color
  function showFilamentsByColor(hex) {
    // Ordenar filamentos por cercanía
    const sorted = [...filaments].sort((a,b) =>
      colorDistance(hex, a.hex) - colorDistance(hex, b.hex)
    );
    filamentsDisplay.innerHTML = '';
    sorted.forEach(fil => {
      const div = document.createElement('div');
      div.className = 'filament-item';

      div.innerHTML = `
        <div class="filament-color" style="background-color: ${fil.hex};"></div>
        <div class="filament-name">${fil.name}</div>
        <a href="${fil.link}" target="_blank" rel="noopener noreferrer" class="filament-link" title="Ver producto">${fil.hex}</a>
      `;
      filamentsDisplay.appendChild(div);
    });
  }

  // Control rueda con mouse y teclado
  function updateColorFromPosition(clientX, clientY) {
    const rect = colorWheel.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top + rect.height/2;
    const dx = clientX - cx;
    const dy = clientY - cy;
    let angle = Math.atan2(dy, dx) * 180 / Math.PI; // Rango -180 a 180
    if(angle < 0) angle += 360;
    selectedHue = angle;
    // actualiza la rueda y texto
    const hex = HSVtoHex(selectedHue, 1, 1);
    selectedHexEl.textContent = hex.toUpperCase();
    colorIndicator.style.backgroundColor = hex;
    showFilamentsByColor(hex);
  }

  // Eventos rueda
  let dragging = false;
  colorWheel.addEventListener('mousedown', e => {
    dragging = true;
    updateColorFromPosition(e.clientX, e.clientY);
  });
  window.addEventListener('mouseup', e => dragging = false);
  window.addEventListener('mousemove', e => {
    if(dragging) updateColorFromPosition(e.clientX, e.clientY);
  });

  // Navegación teclado rueda
  colorWheel.addEventListener('keydown', e => {
    if(e.key === "ArrowRight" || e.key === "ArrowUp") {
      e.preventDefault();
      selectedHue = (selectedHue + 5) % 360;
      const hex = HSVtoHex(selectedHue, 1, 1);
      selectedHexEl.textContent = hex.toUpperCase();
      colorIndicator.style.backgroundColor = hex;
      showFilamentsByColor(hex);
    } else if(e.key === "ArrowLeft" || e.key === "ArrowDown") {
      e.preventDefault();
      selectedHue = (selectedHue - 5 + 360) % 360;
      const hex = HSVtoHex(selectedHue, 1, 1);
      selectedHexEl.textContent = hex.toUpperCase();
      colorIndicator.style.backgroundColor = hex;
      showFilamentsByColor(hex);
    }
  });

  // Ideas de impresión 3D basadas en filamentos en stock
  const ideasBtn = document.getElementById('generateIdeasBtn');
  const ideasText = document.getElementById('ideasText');

  const ideasBase = [
    "Figuras decorativas para tu escritorio",
    "Soportes personalizados para gadgets",
    "Juegos de piezas modulares",
    "Porta tarjetas elegantes",
    "Modelos orgánicos para prototipos",
    "Carcasas para dispositivos electrónicos",
    "Accesorios para el hogar con textura",
    "Lámparas y difusores de luz creativos",
    "Miniaturas detalladas para hobbies",
    "Organizadores prácticos y estéticos"
  ];

  function generateIdeas() {
    // Mezclar filamentos para sugerencias con color real
    let ideas = [];
    const count = 3;
    for(let i=0; i<count; i++){
      const idea = ideasBase[Math.floor(Math.random()*ideasBase.length)];
      const fil = filaments[Math.floor(Math.random()*filaments.length)];
      ideas.push(`"${idea}" en color <strong style="color:${fil.hex}">${fil.name}</strong>`);
    }
    ideasText.innerHTML = ideas.map(i => `<p>${i}</p>`).join('');
  }

  ideasBtn.addEventListener('click', generateIdeas);

  // Inicializa la página
  function init() {
    renderColorList(filaments);
    selectColor(filaments[0].hex);
  }
  init();
</script>
</body>
</html>


